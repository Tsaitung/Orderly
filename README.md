# äº•ç„¶ Orderly Platform - æ•¸ä½ä¾›æ‡‰éˆå¹³å°

> **ä¼æ¥­ç´šé¤é£²ä¾›æ‡‰éˆæ•¸ä½åŒ–è§£æ±ºæ–¹æ¡ˆ**  
> **ç‹€æ…‹**: é–‹ç™¼ä¸­ (25% å®Œæˆ)  
> **ç›®æ¨™**: å°‡å°å¸³æ™‚é–“å¾ 8 å°æ™‚ç¸®çŸ­åˆ° 30 åˆ†é˜  
> **æ¶æ§‹**: å¾®æœå‹™ + é›²åŸç”Ÿ + è‡ªå‹•åŒ– CI/CD

---

## ğŸš¨ ç•¶å‰å°ˆæ¡ˆç‹€æ…‹

### ğŸ“Š æ•´é«”é€²åº¦: 25% å®Œæˆ

**æŠ€è¡“åŸºç¤è¨­æ–½**: âœ… **è¶…æ¨™å®Œæˆ (85%)**

- 8å€‹å¾®æœå‹™æ¶æ§‹å®Œæ•´éƒ¨ç½²
- ä¼æ¥­ç´šç›£æ§å’Œæ€§èƒ½æ¸¬è©¦æ¡†æ¶
- CI/CD ç®¡é“å’Œ Docker å®¹å™¨åŒ–

**æ ¸å¿ƒæ¥­å‹™åŠŸèƒ½**: âŒ **åš´é‡æ»¯å¾Œ (20%)**

- è¨‚å–®ç®¡ç†ã€å°å¸³å¼•æ“ã€ERP æ•´åˆç­‰æ ¸å¿ƒåŠŸèƒ½ç¼ºå¤±
- å‰ç«¯ç”¨æˆ¶ä»‹é¢å°šæœªé–‹ç™¼
- è³‡æ–™åº«é€£æ¥ä½¿ç”¨ mock æ•¸æ“š

âš ï¸ **éœ€è¦ç«‹å³é—œæ³¨**: æŠ€è¡“å„ªç§€ä½†å•†æ¥­åƒ¹å€¼äº¤ä»˜ä¸è¶³

---

## ğŸ“š é‡è¦æ–‡æª”

- **[å®Œæ•´æ–‡ä»¶ç´¢å¼•](docs/INDEX.md)** â€” æ‰€æœ‰ Markdown æ–‡ä»¶çš„ç”¨é€”èˆ‡åˆ†é¡ä¸€è¦½ã€‚

### ğŸ§‘â€ğŸ’» é–‹ç™¼å”ä½œï¼ˆå”¯ä¸€æŒ‡å—ï¼‰

- **[é–‹ç™¼åŠ©æ‰‹èˆ‡ä»£ç¢¼å”ä½œæŒ‡å—](CLAUDE.md)** â€” ä»¥æ­¤ç‚ºå”¯ä¸€é–‹ç™¼åŠ©ç†/ä»£ç†ä½¿ç”¨èˆ‡å”ä½œæŒ‡å¼•
- **[å”ä½œå®ˆå‰‡ Repository Guidelines](CLAUDE.md#repository-guidelines)** â€” ä»£ç†èˆ‡å”ä½œè€…çš„æµç¨‹ã€æ¸¬è©¦èˆ‡å®‰å…¨æ¨™æº–ç¸½è¦½

### ğŸ“‹ æœ€æ–°ç‹€æ…‹å ±å‘Š (å¿…è®€)

- **[é–‹ç™¼é€²åº¦ç¶œåˆå ±å‘Š](docs/DEVELOPMENT-PROGRESS-REPORT.md)** - å°ˆæ¡ˆæ•´é«”ç‹€æ³åˆ†æ
- **[é—œéµå·®è·åˆ†æ](docs/CRITICAL-GAPS-ANALYSIS.md)** - 5å€‹é—œéµé˜»ç¤™åŠè§£æ±ºæ–¹æ¡ˆ
- **[ç·Šæ€¥è¡åˆºè¨ˆåŠƒ](docs/NEXT-SPRINT-PLAN.md)** - 4é€± MVP äº¤ä»˜è¨ˆåŠƒ
- **[éƒ¨ç½²æª¢æŸ¥æ¸…å–®](docs/DEPLOYMENT-CHECKLIST.md)** - ç”Ÿç”¢éƒ¨ç½²å®Œæ•´æŒ‡å—

### ğŸ“– æŠ€è¡“æ–‡æª”

- **[Staging æ°¸ä¹…åŒ–è¨ˆç•«](plan.md)** - æœ€æ–°ç’°å¢ƒä¿®å¾©èˆ‡éƒ¨ç½²å¾…è¾¦
- **[æŠ€è¡“æ¶æ§‹æ–‡æª”](docs/Technical-Architecture-Summary.md)** - ç³»çµ±æ¶æ§‹è¨­è¨ˆ
- **[API è¦æ ¼æ–‡æª”](docs/api-specification.yaml)** - RESTful API å®šç¾©
- **[è³‡æ–™åº«æ¶æ§‹](docs/Database-Schema-Core.md)** - å®Œæ•´è³‡æ–™åº«è¨­è¨ˆ

### ğŸ¨ ç”¢å“è¨­è¨ˆ

- **[ç”¢å“éœ€æ±‚æ–‡æª”](docs/PRD-Complete.md)** - å®Œæ•´ç”¢å“è¦æ ¼
- **[è¨­è¨ˆç³»çµ±](docs/design-system.md)** - UI/UX è¨­è¨ˆè¦ç¯„
- **[ç”¨æˆ¶ä»‹é¢ç·šæ¡†](docs/User-Interface-Wireframes.md)** - é é¢è¨­è¨ˆè¦åŠƒ

---

## ğŸ—ï¸ æ¶æ§‹æ¦‚è¦½

### ğŸ–¥ï¸ å‰ç«¯ (Next.js + TypeScript)

```
app/
â”œâ”€â”€ (routes)/                 # App Router è·¯ç”±
â”œâ”€â”€ components/              # å¯é‡ç”¨å…ƒä»¶
â”œâ”€â”€ lib/                     # å·¥å…·å‡½å¼
â””â”€â”€ styles/                  # å…¨åŸŸæ¨£å¼

Port: 3000 | Health: /api/health
```

### âš¡ å¾Œç«¯å¾®æœå‹™ï¼ˆFastAPI + SQLAlchemyï¼‰

```
backend/
â”œâ”€â”€ api-gateway/                 # API é–˜é“ (Port 8000)
â”œâ”€â”€ user-service-fastapi/            # ç”¨æˆ¶ç®¡ç†ï¼ˆFastAPI + SQLAlchemy, Port 3001ï¼‰
â”œâ”€â”€ order-service-fastapi/           # è¨‚å–®ç®¡ç†ï¼ˆFastAPI + SQLAlchemy, Port 3002ï¼‰
â”œâ”€â”€ product-service-fastapi/         # å•†å“ç›®éŒ„ï¼ˆFastAPI + SQLAlchemy, Port 3003ï¼‰
â”œâ”€â”€ acceptance-service-fastapi/      # é©—æ”¶ç®¡ç†ï¼ˆFastAPI, Port 3004ï¼‰
â”œâ”€â”€ billing-service-fastapi/         # å¸³å‹™çµç®—ï¼ˆFastAPI, Port 3005ï¼‰
â””â”€â”€ notification-service-fastapi/    # é€šçŸ¥æœå‹™ï¼ˆFastAPI, Port 3006ï¼‰

æ‰€æœ‰æœå‹™å¥åº·æª¢æŸ¥: /{service}/health
```

### ğŸ—„ï¸ è³‡æ–™å­˜å„²

- **PostgreSQL**: ä¸»è¦è³‡æ–™åº«ï¼ˆSQLAlchemy ORM + Alembic é·ç§»ï¼‰
- **Redis**: å¿«å–å’Œæœƒè©±ç®¡ç†
- **Google Cloud Storage**: æª”æ¡ˆå­˜å„²

### ğŸ”§ åŸºç¤è¨­æ–½

- **å®¹å™¨åŒ–**: Docker + Google Cloud Run
- **CI/CD**: GitHub Actions (8å€‹å·¥ä½œæµç¨‹)
- **ç›£æ§**: Prometheus + APM + åˆ†å¸ƒå¼è¿½è¹¤
- **IaC**: Terraform (Google Cloud Platform)

---

## ğŸš€ å¿«é€Ÿå•Ÿå‹•

### ğŸ“‹ ç³»çµ±éœ€æ±‚

- Node.js 18+
- Docker & Docker Compose
- PostgreSQL 15+
- Redis 7+

### ğŸ› ï¸ é–‹ç™¼ç’°å¢ƒè¨­ç½®

#### 1. å°ˆæ¡ˆè¨­ç½®

```bash
# è¤‡è£½å°ˆæ¡ˆ
git clone <repository-url>
cd orderly

# å®‰è£ä¾è³´
npm install

# è¨­ç½®ç’°å¢ƒè®Šæ•¸
cp .env.example .env.local
```

#### 2. è³‡æ–™åº«è¨­ç½®ï¼ˆSQLAlchemy + Alembicï¼‰

```bash
# å•Ÿå‹•æœ¬åœ°è³‡æ–™åº«èˆ‡ Redisï¼ˆè‹¥å°šæœªå•Ÿå‹•ï¼‰
docker-compose up -d postgres redis

# åŸ·è¡Œè³‡æ–™åº«é·ç§»ï¼ˆå„ FastAPI æœå‹™ï¼‰
cd backend/user-service-fastapi && alembic upgrade head && cd -
cd backend/order-service-fastapi && alembic upgrade head && cd -
cd backend/product-service-fastapi && alembic upgrade head && cd -
```

#### 3. å•Ÿå‹•é–‹ç™¼æœå‹™

```bash
# å•Ÿå‹•æ‰€æœ‰æœå‹™
npm run dev

# æˆ–åˆ†åˆ¥å•Ÿå‹•
npm run dev:frontend    # å‰ç«¯ (Port 3000)
npm run dev:backend     # æ‰€æœ‰å¾Œç«¯æœå‹™
```

#### 4. é©—è­‰å®‰è£

```bash
# æª¢æŸ¥æœå‹™ç‹€æ…‹
curl http://localhost:3000/api/health    # å‰ç«¯
curl http://localhost:8000/health        # API Gateway
curl http://localhost:3001/health        # User Service
# ... å…¶ä»–æœå‹™
```

---

## ğŸ§ª æ¸¬è©¦å’Œå“è³ªä¿è­‰

### å–®å…ƒæ¸¬è©¦

```bash
npm test                    # åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
npm run test:watch          # ç›£è¦–æ¨¡å¼
npm run test:coverage       # æ¸¬è©¦è¦†è“‹ç‡
```

### æ•´åˆæ¸¬è©¦

```bash
npm run test:integration    # API æ•´åˆæ¸¬è©¦
npm run test:e2e           # ç«¯åˆ°ç«¯æ¸¬è©¦
```

### æ€§èƒ½æ¸¬è©¦

```bash
node scripts/performance-test.js      # è² è¼‰æ¸¬è©¦
node scripts/performance-analysis.js  # æ€§èƒ½åˆ†æ
```

### ç¨‹å¼ç¢¼å“è³ª

```bash
npm run lint              # ESLint æª¢æŸ¥
npm run format            # Prettier æ ¼å¼åŒ–
npm run type-check        # TypeScript é¡å‹æª¢æŸ¥
```

---

## ğŸš¢ éƒ¨ç½²æŒ‡å—

### ğŸ  æœ¬åœ°å®Œæ•´ç’°å¢ƒ

```bash
# Docker Compose å®Œæ•´ç’°å¢ƒ
docker-compose up -d

# æª¢æŸ¥æ‰€æœ‰æœå‹™ç‹€æ…‹
docker-compose ps
docker-compose logs -f
```

### â˜ï¸ ç”Ÿç”¢éƒ¨ç½² (Google Cloud Run)

```bash
# ä½¿ç”¨è‡ªå‹•åŒ–éƒ¨ç½²è…³æœ¬
chmod +x scripts/deploy-cloud-run.sh
./scripts/deploy-cloud-run.sh

# æˆ–ä½¿ç”¨ Terraform
cd infrastructure/terraform
terraform init
terraform plan -var-file="production.tfvars"
terraform apply
```

è©³ç´°éƒ¨ç½²æµç¨‹è«‹åƒè€ƒ **[éƒ¨ç½²æª¢æŸ¥æ¸…å–®](docs/DEPLOYMENT-CHECKLIST.md)**

---

### ğŸ”§ éƒ¨ç½²ç’°å¢ƒè®Šæ•¸èˆ‡å„ªå…ˆé †åºï¼ˆCloud Run / gcloud CLIï¼‰

- å„ªå…ˆé †åºï¼ˆä¼ºæœç«¯è§£æ `backendUrl`ï¼‰:
  1) `ORDERLY_BACKEND_URL` â†’ 2) `BACKEND_URL` â†’ 3) ç”± `NEXT_PUBLIC_API_BASE_URL` æ¨å°ï¼ˆå–å…¶ Originï¼‰â†’ 4) å›é€€ `http://localhost:8000`
- æ¨è–¦åšæ³•:
  - Cloud Run åŸ·è¡Œæ™‚ç”¨ `--set-env-vars` åŒæ™‚è¨­ç½® `ORDERLY_BACKEND_URL`ã€`BACKEND_URL`ã€`NODE_ENV`
  - é¡å¤–è¨­ `NEXT_PUBLIC_API_BASE_URL=<BACKEND_URL>/api` ä¾¿æ–¼è¨ºæ–·èˆ‡ç€è¦½å™¨ç«¯ä½¿ç”¨
- æœ¬åœ°é–‹ç™¼ï¼ˆ.env.localï¼‰: åƒè€ƒ `.env.example` å·²ç¤ºç¯„ä¸‰è€…è¨­å®šèˆ‡èªªæ˜

æ³¨æ„ï¼šæœå‹™ URL å½¢ç‹€ï¼ˆéå¸¸é‡è¦ï¼‰

- PRODUCT_SERVICE_URL: æ‡‰ç‚ºæœå‹™æ ¹ç¶²å€ï¼ˆä¾‹å¦‚ `https://product-service-xxxxx.run.app`ï¼‰ã€‚Gateway æœƒä¿ç•™å®Œæ•´è·¯å¾‘ `/api/products/*`ã€‚
- SUPPLIER_SERVICE_URL: æœå‹™æ ¹ç¶²å€ï¼ˆä¾‹å¦‚ `https://supplier-service-xxxxx.run.app`ï¼‰ã€‚Gateway æœƒè½‰ç™¼ `/api/suppliers/*`ã€‚
- CUSTOMER_HIERARCHY_SERVICE_URL: æœå‹™æ ¹ç¶²å€ï¼Œè«‹å‹¿é™„åŠ  `/api/v2`ï¼ˆä¾‹å¦‚ `https://customer-hierarchy-xxxxx.run.app`ï¼‰ã€‚Gateway æœƒè‡ªå‹•é™„åŠ  `/api/v2` å¾Œå†è½‰ç™¼ï¼Œå¦‚ `/api/v2/hierarchy/tree`ã€‚
- ACCEPTANCE_SERVICE_URL: æ­¤æœå‹™åœ¨è‡ªèº«ä»¥ `/acceptance` ç‚ºæ ¹ï¼›é è¨­å€¼å·²åŒ…å«æ­¤è·¯å¾‘ï¼ˆä¾‹å¦‚ `http://localhost:3004/acceptance`ï¼‰ã€‚åœ¨ Cloud Run ä¹Ÿå¯ä¿æŒå¸¶è·¯å¾‘çš„æœå‹™ URLã€‚

è‹¥éŒ¯èª¤åœ°åœ¨ `CUSTOMER_HIERARCHY_SERVICE_URL` åŠ ä¸Š `/api/v2`ï¼ŒGateway å°‡çµ„åˆç‚º `/api/v2/api/v2/*`ï¼Œå°è‡´ 404/503ã€‚

ç¯„ä¾‹ï¼šä»¥ gcloud éƒ¨ç½²å‰ç«¯ï¼ˆä»¥ CI åŒæ­¥ç”¨æ³•ç‚ºæº–ï¼‰

```bash
BACKEND_URL="https://orderly-api-gateway-fastapi-staging-xxxxx.run.app"

gcloud run deploy orderly-frontend-staging \
  --image=asia-east1-docker.pkg.dev/$PROJECT/orderly/orderly-frontend:staging-<sha> \
  --region=asia-east1 \
  --platform=managed \
  --allow-unauthenticated \
  --set-env-vars="NODE_ENV=staging,ORDERLY_BACKEND_URL=$BACKEND_URL,BACKEND_URL=$BACKEND_URL,NEXT_PUBLIC_API_BASE_URL=$BACKEND_URL/api" \
  --memory=1Gi --cpu=1 --min-instances=0 --max-instances=10 --concurrency=100 --port=8080
```

è¨ºæ–·å»ºè­°ï¼ˆç™¼ç”Ÿ 500/503 æ™‚ï¼‰

- å‰ç«¯ï¼šé–‹å•Ÿ `https://<frontend>/api/env-check` ç¢ºèª `computed_config.backendUrl` èˆ‡å…¬é–‹è®Šæ•¸è¨­å®šã€‚
- Gatewayï¼šé–‹å•Ÿ `https://<gateway>/service-map` æª¢æŸ¥æ‰€æœ‰ä¸‹æ¸¸æœå‹™ URL æ˜¯å¦æ­£ç¢ºï¼ˆç‰¹åˆ¥æ˜¯ `CUSTOMER_HIERARCHY_SERVICE_URL` ä¸æ‡‰åŒ…å« `/api/v2`ï¼‰ã€‚
- éŒ¯èª¤å°æ‡‰ï¼š
  - `HTTP 503: {"error":"products service unavailable", "correlationId":...}` å¤šç‚º Gateway ç„¡æ³•é€£è‡³ Product æœå‹™ï¼ˆURL éŒ¯èª¤ã€æœå‹™æœªéƒ¨ç½²ã€ç¶²è·¯/IAM è¨­å®šï¼‰ã€‚
  - `GET /api/bff/v2/hierarchy/tree 503` å¸¸è¦‹ç‚º Hierarchy æœå‹™ URL é™„åŠ äº† `/api/v2` å°è‡´è·¯å¾‘é‡è¤‡ã€‚
  - `GET /api/bff/suppliers ... 500` å¤šåŠç‚ºä¾›æ‡‰å•†æœå‹™è‡ªèº«æ‹‹éŒ¯ï¼ˆè«‹ç”¨ `X-Correlation-ID` æ–¼ Cloud Run æ—¥èªŒè¿½è¹¤ï¼‰ã€‚

é©—è­‰éƒ¨ç½²çµæœ

- æ‰“é–‹å‰ç«¯æœå‹™ `/api/env-check`ï¼š
  - `raw_environment_variables.ORDERLY_BACKEND_URL` èˆ‡ `BACKEND_URL` æ‡‰ç­‰æ–¼ Cloud Run API Gateway æ ¹ç¶²å€
  - `computed_config.backendUrl` æ‡‰èˆ‡ä¸Šåˆ—ç›¸åŒ
  - `validation.backend_url_resolved = true`

æ³¨æ„äº‹é …ï¼ˆNext.js App Router + Standaloneï¼‰

- è«‹å‹¿ä¾è³´ `publicRuntimeConfig` åœ¨åŸ·è¡Œæ™‚è®€å–è®Šæ•¸ï¼›å·²çµ±ä¸€æ”¹ç‚ºä¼ºæœç«¯ç›´æ¥ä½¿ç”¨ `process.env`
- ç€è¦½å™¨ç«¯å¦‚éœ€è®Šæ•¸ï¼Œåƒ…ä½¿ç”¨ `NEXT_PUBLIC_*` åç¨±ç©ºé–“ï¼Œä¸¦åœ¨éƒ¨ç½²æ™‚æ³¨å…¥

## ğŸ” ç›£æ§å’Œè§€æ¸¬

### ğŸ“Š é—œéµæŒ‡æ¨™

- **API éŸ¿æ‡‰æ™‚é–“**: P95 < 5ms (å·²é”æˆ)
- **ç³»çµ±å¯ç”¨æ€§**: ç›®æ¨™ 99.9%
- **éŒ¯èª¤ç‡**: < 0.1%
- **æ¸¬è©¦è¦†è“‹ç‡**: 85% (å·²é”æˆ)

### ğŸ”­ ç›£æ§ç«¯é»

```bash
/health                    # æœå‹™å¥åº·ç‹€æ…‹
/metrics                   # Prometheus æŒ‡æ¨™
/apm/status               # APM ç‹€æ…‹
/metrics/business         # æ¥­å‹™æŒ‡æ¨™
```

### ğŸ“ˆ æ•ˆèƒ½ç›£æ§

## ğŸš€ Cloud Run æ‰‹å‹•éƒ¨ç½²å¿«é€ŸæŒ‡å—ï¼ˆé¿å… build context èˆ‡ DB é€£ç·šé™·é˜±ï¼‰

ä»¥ä¸‹æµç¨‹å¯åœ¨æœ¬æ©Ÿæˆ– CI æ‰‹å‹•éƒ¨ç½²å–®ä¸€æœå‹™ï¼Œä¸¦ä»¥ã€ŒæˆåŠŸè¨Šè™Ÿã€åˆ¤æ–·æ˜¯å¦çœŸçš„ç”Ÿæ•ˆã€‚

1) è¨­å®šç’°å¢ƒè®Šæ•¸ï¼ˆèˆ‰ä¾‹ï¼‰

```bash
export PROJECT_ID=orderly-472413
export REGION=asia-east1
export ENV=staging
export SHA=$(git rev-parse --short=40 HEAD)
cd "$(git rev-parse --show-toplevel)"  # å›åˆ° repo æ ¹
```

2) ç”¨ Cloud Build å»ºç½®ï¼ˆå‹™å¿…ä»¥ `backend/` ä½œç‚º build contextï¼‰

- Product Service

```bash
gcloud builds submit . \
  --config=scripts/cloudbuild/cloudbuild.product.yaml \
  --substitutions=_IMAGE=asia-east1-docker.pkg.dev/$PROJECT_ID/orderly/orderly-product-service-fastapi:$SHA
```

- Customer Hierarchy Service

```bash
gcloud builds submit . \
  --config=scripts/cloudbuild/cloudbuild.hierarchy.yaml \
  --substitutions=_IMAGE=asia-east1-docker.pkg.dev/$PROJECT_ID/orderly/orderly-customer-hierarchy-service-fastapi:$SHA
```

3) éƒ¨ç½²åˆ° Cloud Runï¼ˆåš´æ ¼ä½¿ç”¨å‰›æ‰“å‡ºçš„ tagï¼‰

```bash
gcloud run deploy orderly-product-service-fastapi-$ENV \
  --image=asia-east1-docker.pkg.dev/$PROJECT_ID/orderly/orderly-product-service-fastapi:$SHA \
  --region=$REGION --project=$PROJECT_ID --allow-unauthenticated

gcloud run deploy orderly-customer-hierarchy-service-fastapi-$ENV \
  --image=asia-east1-docker.pkg.dev/$PROJECT_ID/orderly/orderly-customer-hierarchy-service-fastapi:$SHA \
  --region=$REGION --project=$PROJECT_ID --allow-unauthenticated
```

4) ç¢ºä¿ Cloud SQL é€£æ¥å™¨èˆ‡ DB ç’°å¢ƒè®Šæ•¸/Secretï¼ˆä¿éšªè¦†è“‹ä¸€æ¬¡ï¼‰

```bash
INSTANCE_CONN=$(gcloud sql instances describe orderly-db --project=$PROJECT_ID --format='value(connectionName)')

gcloud run services update orderly-product-service-fastapi-$ENV \
  --region=$REGION --project=$PROJECT_ID \
  --add-cloudsql-instances="$INSTANCE_CONN" \
  --update-secrets=POSTGRES_PASSWORD=postgres-password:latest \
  --set-env-vars="DATABASE_HOST=/cloudsql/$INSTANCE_CONN,DATABASE_NAME=orderly,DATABASE_USER=orderly"

gcloud run services update orderly-customer-hierarchy-service-fastapi-$ENV \
  --region=$REGION --project=$PROJECT_ID \
  --add-cloudsql-instances="$INSTANCE_CONN" \
  --update-secrets=POSTGRES_PASSWORD=postgres-password:latest \
  --set-env-vars="DATABASE_HOST=/cloudsql/$INSTANCE_CONN,DATABASE_NAME=orderly,DATABASE_USER=orderly"
```

5) æˆåŠŸè¨Šè™Ÿæ¸…å–®ï¼ˆå‹™å¿…é€é …é€šéï¼‰

- éƒ¨ç½²æ˜ åƒï¼š
  - `gcloud run services describe <service> --format=json | jq '.spec.template.spec.containers[0].image'` æ‡‰ç­‰æ–¼å‰› build çš„ `$SHA` tagã€‚
  - `.status.traffic[0].percent==100` ä¸” `latestReadyRevisionName` ç‚ºæ–° revisionã€‚
- DB é€£ç·šï¼š
  - ç›´æ‰“æœå‹™ `/db/health` æ‡‰å› 200ï¼›`/db/info` å›é®ç½©éçš„ DSN èˆ‡ ping_msã€‚
  - è‹¥ `/db/health` 404 â†’ æ˜ åƒæœªæ›´æ–°ï¼›503 â†’ CloudSQL ç¶å®š/ENV/Secret æœªè½åœ°ã€‚
- Gateway è·¯ç”±ï¼š
  - `/ready` æ‡‰ç‚º readyï¼Œä¸”åŒ…å«æ¯å€‹æ¢é‡çš„ url èˆ‡éŒ¯èª¤æ‘˜è¦ã€‚
  - ä¸‰æ¢ smokeï¼ˆç„¡æˆæ¬Šï¼‰ï¼š`/api/products/categories?includeProducts=false`ã€`/api/products/skus/search?page_size=1`ã€`/api/v2/hierarchy/tree` æ‡‰ 2xxã€‚
  - è‹¥ 4xx/5xxï¼Œå¾å›æ‡‰ header æ“·å– `X-Correlation-ID` æŸ¥ Cloud Loggingã€‚

6) å¸¸è¦‹é™·é˜±

- ä¸è¦åœ¨å­è³‡æ–™å¤¾ç”¨ `gcloud run deploy --source .` æˆ–æœ¬æ©Ÿ `docker build`ï¼šæœƒç”¨éŒ¯ build contextï¼Œå°è‡´ Dockerfile çš„ `COPY backend/...` èˆ‡ `COPY libs/` å¤±æ•ˆã€‚
- Cloud SQLï¼š
  - `cloudsql-instances` æ³¨è§£å¿…é ˆå­˜åœ¨ï¼ˆ`<PROJECT>:asia-east1:<INSTANCE>`ï¼‰ã€‚
  - `DATABASE_HOST` å¿…é ˆç²¾ç¢ºç‚º `/cloudsql/<INSTANCE_CONN>`ã€‚
  - `POSTGRES_PASSWORD` å»ºè­°ä»¥ Secret latest ç¶å®šï¼Œä¸¦èˆ‡ DB ä½¿ç”¨è€…å£ä»¤åŒæ­¥ã€‚

7) ä¸€éµè¨ºæ–·

```bash
bash scripts/db/diag.sh
```

å°‡åˆ—å‡ºå„æœå‹™çš„ Cloud SQL ç¶å®šã€ä¸»è¦ DB ENV/Secretã€`/db/health` çµæœï¼Œä¸¦å¿«é€Ÿæ‰¾å‡ºå•é¡Œé»ã€‚CI çš„ post-deploy ä¹Ÿæœƒè‡ªå‹•åŸ·è¡Œï¼Œä¸”åœ¨ Summary ä¸­é™„ä¸Š Correlation ID èˆ‡ DB æ¦‚æ³ã€‚


- **åˆ†å¸ƒå¼è¿½è¹¤**: OpenTelemetry ç›¸å®¹
- **æ—¥èªŒèšåˆ**: çµæ§‹åŒ– JSON æ—¥èªŒ
- **APM æ•´åˆ**: DataDog + New Relic æ”¯æ´
- **å‘Šè­¦ç³»çµ±**: åŸºæ–¼é–¾å€¼çš„è‡ªå‹•å‘Šè­¦

---

## ğŸƒâ€â™‚ï¸ ç•¶å‰é–‹ç™¼é‡é»

### ğŸ”¥ ç·Šæ€¥å„ªå…ˆ (æœ¬é€±)

1. **åŸ·è¡Œè³‡æ–™åº«é·ç§»** - é€£æ¥çœŸå¯¦è³‡æ–™åº«
2. **ç§»é™¤ mock æ•¸æ“šä¾è³´** - å¯¦ç¾çœŸå¯¦ CRUD
3. **é–‹ç™¼æ ¸å¿ƒå‰ç«¯é é¢** - ç™»å…¥ã€è¨‚å–®ã€å°å¸³ä»‹é¢
4. **å¯¦ç¾åŸºæœ¬æ¥­å‹™é‚è¼¯** - è¨‚å–®æµç¨‹å’Œç°¡åŒ–å°å¸³

### âš¡ é«˜å„ªå…ˆ (2-4é€±)

1. **å®Œæˆå°å¸³å¼•æ“** - è‡ªå‹•åŒ¹é…å’Œå·®ç•°æª¢æ¸¬
2. **ERP ç³»çµ±æ•´åˆ** - è‡³å°‘ 1 å€‹å¤–éƒ¨ç³»çµ±
3. **é€šçŸ¥ç³»çµ±** - Email å’Œç³»çµ±å…§é€šçŸ¥
4. **ç”¨æˆ¶é«”é©—å„ªåŒ–** - éŒ¯èª¤è™•ç†å’Œå›é¥‹æ©Ÿåˆ¶

### ğŸ“… ä¸­æœŸç›®æ¨™ (1-3å€‹æœˆ)

1. **è¡Œå‹•ç«¯å„ªåŒ–** - PWA åŠŸèƒ½å¯¦ç¾
2. **é€²éšåˆ†æ** - BI å„€è¡¨æ¿å’Œå ±è¡¨
3. **å¤šé‡æ•´åˆ** - æ”¯ä»˜ã€ç™¼ç¥¨ã€å¤šERPç³»çµ±
4. **è¦æ¨¡åŒ–æº–å‚™** - æ€§èƒ½å„ªåŒ–å’Œè‡ªå‹•æ“´å±•

---

## ğŸ‘¥ åœ˜éšŠå”ä½œ

### ğŸ”„ é–‹ç™¼æµç¨‹

- **åˆ†æ”¯ç­–ç•¥**: GitFlow (main â†’ staging â†’ feature)
- **ç¨‹å¼ç¢¼å¯©æŸ¥**: æ‰€æœ‰ PR éœ€è¦å¯©æŸ¥
- **æäº¤è¦ç¯„**: Conventional Commits
- **CI/CD**: è‡ªå‹•æ¸¬è©¦ã€å»ºæ§‹ã€éƒ¨ç½²

### ğŸ“… æœƒè­°ç¯€å¥

- **æ¯æ—¥ç«™æœƒ**: 9:30 AM (15åˆ†é˜)
- **é€±å›é¡§**: é€±äº” 4:00 PM (60åˆ†é˜)
- **Sprint è¦åŠƒ**: æ¯å…©é€±ä¸€æ¬¡
- **æ¶æ§‹è¨è«–**: æŒ‰éœ€å®‰æ’

### ğŸ“¢ æºé€šæ¸ é“

- **æŠ€è¡“è¨è«–**: GitHub Issues/Discussions
- **å³æ™‚å”ä½œ**: Slack/Teams
- **æ–‡æª”æ›´æ–°**: ç›´æ¥æäº¤åˆ° docs/
- **é‡å¤§æ±ºç­–**: æ¶æ§‹æœƒè­° + RFC

---

## ğŸ†˜ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

#### ğŸ”´ æœå‹™å•Ÿå‹•å¤±æ•—

```bash
# æª¢æŸ¥ç«¯å£å ç”¨
lsof -i :3000
lsof -i :8000

# æª¢æŸ¥ Docker ç‹€æ…‹
docker-compose ps
docker-compose logs [service-name]

# é‡å•Ÿæœå‹™
npm run dev:restart
```

#### ğŸ”´ è³‡æ–™åº«é€£æ¥å•é¡Œ

```bash
# æª¢æŸ¥è³‡æ–™åº«ç‹€æ…‹
docker-compose exec postgres psql -U postgres -c "\\l"

# é‡æ–°åŸ·è¡Œè³‡æ–™åº«é·ç§»ï¼ˆFastAPI æœå‹™ï¼‰
cd backend/user-service-fastapi && alembic upgrade head && cd -
cd backend/order-service-fastapi && alembic upgrade head && cd -
cd backend/product-service-fastapi && alembic upgrade head && cd -
```

#### ğŸ”´ å»ºæ§‹/éƒ¨ç½²éŒ¯èª¤

```bash
# æª¢æŸ¥å»ºæ§‹æ—¥èªŒ
npm run build 2>&1 | tee build.log

# é©—è­‰ Docker æ˜ åƒ
docker build -f Dockerfile.cloudrun -t test-build .
docker run --rm test-build
```

### ğŸ“ æ”¯æ´è³‡æº

- **æŠ€è¡“æ–‡æª”**: docs/ ç›®éŒ„
- **API æ–‡æª”**: docs/api-specification.yaml
- **éŒ¯èª¤è¿½è¹¤**: GitHub Issues
- **æ€§èƒ½åˆ†æ**: scripts/performance-analysis.js

---

## ğŸ”® æœªä¾†ç™¼å±•

### ğŸ¯ çŸ­æœŸç›®æ¨™ (3å€‹æœˆ)

- âœ… å®Œæˆæ ¸å¿ƒ MVP åŠŸèƒ½
- âœ… è‡³å°‘ 3 å€‹å®¢æˆ¶ PoC æˆåŠŸ
- âœ… å°å¸³æ•ˆç‡æå‡ >70%
- âœ… ç³»çµ±ç©©å®šæ€§ >99.5%

### ğŸš€ ä¸­æœŸç›®æ¨™ (6å€‹æœˆ)

- ğŸ¯ æ”¯æ´ 100+ é¤å»³å®¢æˆ¶
- ğŸ¯ æ•´åˆ 5+ ERP ç³»çµ±
- ğŸ¯ AI é©…å‹•çš„æ™ºèƒ½å°å¸³
- ğŸ¯ å¤šåœ°å€éƒ¨ç½²

### ğŸŒŸ é•·æœŸé¡˜æ™¯ (12å€‹æœˆ)

- ğŸŒŸ é¤é£²ä¾›æ‡‰éˆæ•¸ä½åŒ–é ˜å°è€…
- ğŸŒŸ å¹³å°ç”Ÿæ…‹ç³»çµ±å»ºç«‹
- ğŸŒŸ åœ‹éš›å¸‚å ´æ“´å±•
- ğŸŒŸ IPO æº–å‚™å°±ç·’

---

## ğŸ“„ æˆæ¬Šèˆ‡è²¢ç»

### ğŸ“œ æˆæ¬Š

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šæ¢æ¬¾ï¼Œè©³è¦‹ [LICENSE](LICENSE) æª”æ¡ˆã€‚

### ğŸ¤ è²¢ç»æŒ‡å—

1. Fork æœ¬å°ˆæ¡ˆ
2. å‰µå»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤è®Šæ›´ (`git commit -m 'feat: add amazing feature'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. é–‹å•Ÿ Pull Request

### ğŸ“ˆ å°ˆæ¡ˆçµ±è¨ˆ

- **ç¨‹å¼ç¢¼è¡Œæ•¸**: 50,000+ è¡Œ
- **æ¸¬è©¦è¦†è“‹ç‡**: 85%
- **æ–‡æª”é æ•¸**: 20+ ä»½æŠ€è¡“æ–‡æª”
- **å¾®æœå‹™æ•¸é‡**: 8 å€‹æœå‹™
- **CI/CD æµæ°´ç·š**: 8 å€‹å·¥ä½œæµç¨‹

---

## ğŸ“ è¯çµ¡è³‡è¨Š

### ğŸ¢ å°ˆæ¡ˆåœ˜éšŠ

- **æŠ€è¡“è² è²¬äºº**: å¾Œç«¯æ¶æ§‹åœ˜éšŠ
- **ç”¢å“ç¶“ç†**: ç”¢å“ç­–ç•¥åœ˜éšŠ
- **DevOps å·¥ç¨‹å¸«**: åŸºç¤è¨­æ–½åœ˜éšŠ
- **UI/UX è¨­è¨ˆå¸«**: ç”¨æˆ¶é«”é©—åœ˜éšŠ

### ğŸ“§ è¯çµ¡æ–¹å¼

- **æŠ€è¡“æ”¯æ´**: GitHub Issues
- **ç”¢å“åé¥‹**: ç”¢å“åœ˜éšŠ
- **å•†æ¥­åˆä½œ**: æ¥­å‹™é–‹ç™¼åœ˜éšŠ
- **åª’é«”è©¢å•**: å…¬é—œåœ˜éšŠ

---

_æœ€å¾Œæ›´æ–°: 2025-09-19 | ç‰ˆæœ¬: v1.0-alpha | å»ºæ§‹: #2025.09.19.1_

**ğŸ¯ è¨˜ä½æˆ‘å€‘çš„ä½¿å‘½**: å°‡é¤é£²æ¥­çš„å°å¸³æ™‚é–“å¾ 8 å°æ™‚ç¸®çŸ­åˆ° 30 åˆ†é˜ï¼Œè®“æ¯ä¸€ç­†äº¤æ˜“éƒ½äº•ç„¶æœ‰åºã€‚
