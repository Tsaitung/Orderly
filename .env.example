# 井然 Orderly Platform - Environment Variables Template
# 基於統一配置管理系統的環境變數模板
# 複製此文件為 .env.local 並填入實際值

# =============================================================================
# 核心應用配置
# =============================================================================
ENVIRONMENT=development
DEBUG=true
APP_VERSION=2.0.0
LOG_LEVEL=DEBUG

# =============================================================================
# 資料庫配置
# =============================================================================
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=orderly
DATABASE_USER=orderly
POSTGRES_PASSWORD=orderly_dev_password
DATABASE_URL=postgresql+asyncpg://orderly:orderly_dev_password@localhost:5432/orderly

# 資料庫連接池設定
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_ECHO=false

# =============================================================================
# Redis 配置
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_URL=redis://localhost:6379/0
REDIS_TTL=300

# =============================================================================
# JWT 安全配置
# =============================================================================
JWT_SECRET=dev-jwt-secret-change-in-production
JWT_REFRESH_SECRET=dev-jwt-refresh-secret-change-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRES_IN=30
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# 應用密鑰（請在生產環境中更改）
# =============================================================================
SECRET_KEY=dev-app-secret-key-change-in-production

# =============================================================================
# CORS 配置
# =============================================================================
CORS_ORIGINS=http://localhost:3000,http://localhost:8000,http://localhost:8080

# =============================================================================
# 服務發現 URLs（本地開發）
# =============================================================================
API_GATEWAY_URL=http://localhost:8000
USER_SERVICE_URL=http://localhost:3001
ORDER_SERVICE_URL=http://localhost:3002
PRODUCT_SERVICE_URL=http://localhost:3003
ACCEPTANCE_SERVICE_URL=http://localhost:3004
NOTIFICATION_SERVICE_URL=http://localhost:3006
CUSTOMER_HIERARCHY_SERVICE_URL=http://localhost:3007
SUPPLIER_SERVICE_URL=http://localhost:3008

# =============================================================================
# 檔案上傳配置
# =============================================================================
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=jpg,jpeg,png,pdf,xlsx,csv
UPLOAD_PATH=./uploads
TEMP_PATH=./temp

# =============================================================================
# 電子郵件配置（開發環境使用 MailHog）
# =============================================================================
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USER=
SMTP_PASSWORD=
SMTP_TLS=false
EMAIL_FROM_ADDRESS=noreply@orderly.dev
EMAIL_FROM_NAME=井然 Orderly (Dev)

# =============================================================================
# 雲端服務配置（本地測試）
# =============================================================================
GCS_BUCKET_NAME=orderly-dev-bucket
GCS_CREDENTIALS_PATH=./credentials/gcs-dev-key.json

# =============================================================================
# 功能開關（開發環境）
# =============================================================================
ENABLE_SWAGGER=true
ENABLE_DOCS=true
ENABLE_DEBUG_TOOLBAR=true
DISABLE_AUTH=false
ENABLE_METRICS=true
ENABLE_TRACING=true

# =============================================================================
# 業務規則配置
# =============================================================================
MAX_ORDER_ITEMS=100
DEFAULT_ORDER_EXPIRY_HOURS=72
MAX_HIERARCHY_DEPTH=4
MAX_LOCATIONS_PER_COMPANY=100

# =============================================================================
# 緩存配置
# =============================================================================
CACHE_SHORT_TTL=300
CACHE_MEDIUM_TTL=1800
CACHE_LONG_TTL=3600

# =============================================================================
# 率限配置（開發環境較寬鬆）
# =============================================================================
RATE_LIMIT_PER_MINUTE=120
RATE_LIMIT_BURST=20

# =============================================================================
# 監控配置
# =============================================================================
METRICS_PORT=9090
ENABLE_PROFILING=true
SLOW_QUERY_THRESHOLD=1.0

# =============================================================================
# 台灣業務配置
# =============================================================================
TAIWAN_COMPANY_TAX_ID_PATTERN=^\d{8}$
TAIWAN_INDIVIDUAL_ID_PATTERN=^[A-Z]\d{9}$

# =============================================================================
# 開發專用配置
# =============================================================================
SQLALCHEMY_ECHO=true
ENABLE_TEST_ENDPOINTS=true
TEST_DATA_RETENTION_DAYS=1

# =============================================================================
# 前端配置（Next.js）
# =============================================================================
NODE_ENV=development
# 伺服端在執行時的後端 Gateway 基底網址（優先）
# 若未設定，會回退到 BACKEND_URL；兩者皆無時，會嘗試由 NEXT_PUBLIC_API_BASE_URL 推導；最後回退 http://localhost:8000
ORDERLY_BACKEND_URL=http://localhost:8000
# 次優先的後端 Gateway 基底網址（與 ORDERLY_BACKEND_URL 擇一即可，建議 Cloud Run 同時設兩者）
BACKEND_URL=http://localhost:8000
# 提供給瀏覽器端用的公共變數；同時也讓伺服端可在缺省時推導出 Gateway origin
NEXT_PUBLIC_API_BASE_URL=http://localhost:8000/api
NEXTAUTH_SECRET=dev-nextauth-secret-change-in-production
NEXTAUTH_URL=http://localhost:3000

# =============================================================================
# 注意事項
# =============================================================================
# 1. 此文件包含開發環境的預設值
# 2. 生產環境請使用 Secret Manager 管理敏感資訊
# 3. 請勿提交包含真實密鑰的 .env 文件到版本控制
# 4. 所有配置都在此文件中，不同環境使用環境變數覆蓋
# 5. 使用 scripts/env/setup-dev.sh 可以快速設置開發環境
